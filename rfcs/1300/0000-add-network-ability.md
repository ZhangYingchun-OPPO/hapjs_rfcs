- 提案时间: 2023-04-24
- 影响版本: 1300
- 相关 Issues: 无

## 【必填】概述

快应用新增获取网络信号强度的能力。

## 【必填】动机

以便开发者根据不同的网络信号强度调整流媒体质量，优化用户体验。

## 【必填】API规格和使用案例

#### 接口定义

network.getType(OBJECT)

获取网络类型

参数：

| 参数名   | 类型     | 必填 | 说明                         |
| -------- | -------- | ---- | ---------------------------- |
| success  | Function | 否   | 成功回调                     |
| fail     | Function | 否   | 失败回调，可能是因为缺乏权限 |
| complete | Function | 否   | 执行结束后的回调             |

success 返回值：

|     参数名     |  类型   |                             说明                             |
| :------------: | :-----: | :----------------------------------------------------------: |
|    metered     | Boolean |                       是否按照流量计费                       |
|      type      | String  | 网络类型，可能的值为 2g，3g，4g，wifi，none， 5g(`1070+`)，bluetooth(`1070+`)，others(`1070+`) |
| signalStrength | Integer | 网络信号强度(`1300+`) 取值说明： 1.当前网络是wifi网络时，返回值为Rssi取值，单位dbm。 2.当前网络是数据网络时，返回值单位dbm。 3.返回错误码说明：-1000（通用网络强度获取错误码），-1001（无精确定位权限），-1002（当前网络类型不支持获取网络信号强度），-1003（获取cellInfo失败） |

##### 代码案例

\```javascript
network.getType({
callback: function(data) {
console.log('handling success: ${data.type}')
}
})
\```

## 【必填】提案人员是否愿意自行实现该功能

*是：提案人员愿意在提案通过后自行实现该功能；

## 详细设计

可选，请向一个熟悉 hapjs内部实现的人讲解如何在 hapjs中实现这个功能，或讲解实现这一功能需要什么步骤。

## 缺陷

我们是不是可以不做这个功能，请考虑：

- 实现这个功能的投入：包括代码的复杂度、代码体积的增加、实现功能投入的人力
- 这个功能是不是不需要 hapjs提供，使用 hapjs的开发者也可以在应用层实现，甚至实现得更好
- 对 hapjs既有惯用开发习惯的影响
- 对已发布版本和现有功能的影响，以及用户进行迁移的成本
- 对其它未有代码实现的 RFC 提案的影响

## 替代选择

还有其他的方案也可以实现这个功能吗？

## 适配策略

如果我们实现了这个提案，有没有什么办法可以帮助开发者更好地适应这个改动？